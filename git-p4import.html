<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 7.0.2" />
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a { color: blue; }
a:visited { color: fuchsia; }

em {
  font-style: italic;
}

strong {
  font-weight: bold;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1 {
  border-bottom: 2px solid silver;
}
h2 {
  border-bottom: 2px solid silver;
  padding-top: 0.5em;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.2em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble,
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-right: 10%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock > div.content {
  padding-left: 2.0em;
}
div.quoteblock .attribution {
  text-align: right;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.verseblock div.content {
  white-space: pre;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: italic;
}
dd > *:first-child {
  margin-top: 0;
}

ul, ol {
    list-style-position: outside;
}
ol.olist2 {
  list-style-type: lower-alpha;
}

div.tableblock > table {
  border-color: #527bbd;
  border-width: 3px;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}

div.hlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
td.hlist1 {
  vertical-align: top;
  font-style: italic;
  padding-right: 0.8em;
}
td.hlist2 {
  vertical-align: top;
}

@media print {
  div#footer-badges { display: none; }
}
include::./stylesheets/xhtml11-manpage.css[]
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-content {
  padding-left: 2.0em;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}
</style>
<title>git-p4import(1)</title>
</head>
<body>
<div id="header">
<h1>
git-p4import(1) Manual Page
</h1>
<h2>NAME</h2>
<div class="sectionbody">
<p>git-p4import -
   Import a Perforce repository into git
</p>
</div>
</div>
<h2>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<div class="content"><tt>git-p4import</tt> [-q|-v] [--notags] [--authors &lt;file&gt;] [-t &lt;timezone&gt;]
               &lt;//p4repo/path&gt; &lt;branch&gt;
<tt>git-p4import</tt> --stitch &lt;//p4repo/path&gt;
<tt>git-p4import</tt></div></div>
</div>
<h2>DESCRIPTION</h2>
<div class="sectionbody">
<p>Import a Perforce repository into an existing git repository.  When
a &lt;//p4repo/path&gt; and &lt;branch&gt; are specified a new branch with the
given name will be created and the initial import will begin.</p>
<p>Once the initial import is complete you can do an incremental import
of new commits from the Perforce repository.  You do this by checking
out the appropriate git branch and then running <tt>git-p4import</tt> without
any options.</p>
<p>The standard p4 client is used to communicate with the Perforce
repository; it must be configured correctly in order for <tt>git-p4import</tt>
to operate (see below).</p>
</div>
<h2>OPTIONS</h2>
<div class="sectionbody">
<dl>
<dt>
-q
</dt>
<dd>
<p>
        Do not display any progress information.
</p>
</dd>
<dt>
-v
</dt>
<dd>
<p>
        Give extra progress information.
</p>
</dd>
<dt>
--authors
</dt>
<dd>
<p>
        Specify an authors file containing a mapping of Perforce user
        ids to full names and email addresses (see Notes below).
</p>
</dd>
<dt>
--notags
</dt>
<dd>
<p>
        Do not create a tag for each imported commit.
</p>
</dd>
<dt>
--stitch
</dt>
<dd>
<p>
        Import the contents of the given perforce branch into the
        currently checked out git branch.
</p>
</dd>
<dt>
--log
</dt>
<dd>
<p>
        Store debugging information in the specified file.
</p>
</dd>
<dt>
-t
</dt>
<dd>
<p>
        Specify that the remote repository is in the specified timezone.
        Timezone must be in the format "US/Pacific" or "Europe/London"
        etc.  You only need to specify this once, it will be saved in
        the git config file for the repository.
</p>
</dd>
<dt>
&lt;//p4repo/path&gt;
</dt>
<dd>
<p>
        The Perforce path that will be imported into the specified branch.
</p>
</dd>
<dt>
&lt;branch&gt;
</dt>
<dd>
<p>
        The new branch that will be created to hold the Perforce imports.
</p>
</dd>
</dl>
</div>
<h2>P4 Client</h2>
<div class="sectionbody">
<p>You must make the <tt>p4</tt> client command available in your $PATH and
configure it to communicate with the target Perforce repository.
Typically this means you must set the "$P4PORT" and "$P4CLIENT"
environment variables.</p>
<p>You must also configure a <tt>p4</tt> client "view" which maps the Perforce
branch into the top level of your git repository, for example:</p>
<div class="listingblock">
<div class="content">
<pre><tt>Client: myhost

Root:   /home/sean/import

Options:   noallwrite clobber nocompress unlocked modtime rmdir

View:
        //public/jam/... //myhost/jam/...</tt></pre>
</div></div>
<p>With the above <tt>p4</tt> client setup, you could import the "jam"
perforce branch into a branch named "jammy", like so:</p>
<div class="listingblock">
<div class="content">
<pre><tt>$ mkdir -p /home/sean/import/jam
$ cd /home/sean/import/jam
$ git init
$ git p4import //public/jam jammy</tt></pre>
</div></div>
</div>
<h2>Multiple Branches</h2>
<div class="sectionbody">
<p>Note that by creating multiple "views" you can use <tt>git-p4import</tt>
to import additional branches into the same git repository.
However, the <tt>p4</tt> client has a limitation in that it silently
ignores all but the last "view" that maps into the same local
directory.  So the following will <strong>not</strong> work:</p>
<div class="listingblock">
<div class="content">
<pre><tt>View:
        //public/jam/... //myhost/jam/...
        //public/other/... //myhost/jam/...
        //public/guest/... //myhost/jam/...</tt></pre>
</div></div>
<p>If you want more than one Perforce branch to be imported into the
same directory you must employ a workaround.  A simple option is
to adjust your <tt>p4</tt> client before each import to only include a
single view.</p>
<p>Another option is to create multiple symlinks locally which all
point to the same directory in your git repository and then use
one per "view" instead of listing the actual directory.</p>
</div>
<h2>Tags</h2>
<div class="sectionbody">
<p>A git tag of the form p4/xx is created for every change imported from
the Perforce repository where xx is the Perforce changeset number.
Therefore after the import you can use git to access any commit by its
Perforce number, e.g. git show p4/327.</p>
<p>The tag associated with the HEAD commit is also how <tt>git-p4import</tt>
determines if there are new changes to incrementally import from the
Perforce repository.</p>
<p>If you import from a repository with many thousands of changes
you will have an equal number of p4/xxxx git tags.  Git tags can
be expensive in terms of disk space and repository operations.
If you don't need to perform further incremental imports, you
may delete the tags.</p>
</div>
<h2>Notes</h2>
<div class="sectionbody">
<p>You can interrupt the import (e.g. ctrl-c) at any time and restart it
without worry.</p>
<p>Author information is automatically determined by querying the
Perforce "users" table using the id associated with each change.
However, if you want to manually supply these mappings you can do
so with the "--authors" option.  It accepts a file containing a list
of mappings with each line containing one mapping in the format:</p>
<div class="listingblock">
<div class="content">
<pre><tt>    perforce_id = Full Name &lt;email@address.com&gt;</tt></pre>
</div></div>
</div>
<h2>Author</h2>
<div class="sectionbody">
<p>Written by Sean Estabrooks &lt;seanlkml@sympatico.ca&gt;</p>
</div>
<h2>GIT</h2>
<div class="sectionbody">
<p>Part of the <a href="git.html">git(7)</a> suite</p>
</div>
<div id="footer">
<div id="footer-text">
Last updated 08-Jun-2007 16:08:21 UTC
</div>
</div>
</body>
</html>
